#!/usr/bin/env ruby

# Compare the equality of 2 hdl module classes.
# The 2 classes are in separate files.

require 'pp'

if ARGV.size != 2
  puts "error: you must specify 2 ruby hdl modules to compare."
  exit 1
end

$LOAD_PATH.unshift File.expand_path("../../lib")
$LOAD_PATH.unshift File.expand_path("../lib")

require_relative "../lib/verilog_gen"
module File1
  include VerilogGen
end

module File2
  include VerilogGen
end

ns1 = File1 
content1 = File.open(ARGV[0]).read 

ns2 = File2
content2 = File.open(ARGV[1]).read 

eval "
module #{ns1}
  #{content1}
end
"

eval "
module #{ns2}
  #{content2}
end
"
x1 = nil
ns1.constants.select do |c| 
  x1 = ns1.const_get(c).new("hello") if c == :HdlModule
end

pp x1
